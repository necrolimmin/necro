{% extends "base.html" %}
{% load report_extras %}

{% block title %}Админ — Таблица 1 за {{ date|date:"d.m.Y" }}{% endblock %}

{% block content %}
<style>
  .t1a-panel{
    background: var(--surface);
    border: 1px solid var(--stroke);
    border-radius: 20px;
    box-shadow: var(--shadow);
    padding: 14px;
    backdrop-filter: blur(14px);
  }

  .t1a-topbar{
    display:flex;
    justify-content:space-between;
    align-items:flex-start;
    gap:12px;
    flex-wrap:wrap;
    margin-bottom:12px;
  }

  .t1a-titlebox h2{
    margin:0;
    font-size:20px;
    font-weight:950;
    letter-spacing:-.02em;
    color:var(--text);
  }
  .t1a-subtitle{
    margin-top:6px;
    color:var(--muted);
    font-size:13px;
    line-height:1.4;
  }

  .t1a-back{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    gap:10px;
    height:44px;
    padding:0 14px;
    border-radius:14px;
    border:1px solid var(--stroke);
    background: rgba(255,255,255,.55);
    color:var(--text);
    text-decoration:none;
    font-weight:950;
    white-space:nowrap;
    box-shadow: 0 14px 34px rgba(15,23,42,.08);
    transition:transform .12s ease, box-shadow .12s ease, filter .12s ease, background .12s ease;
    user-select:none;
  }
  html[data-theme="dark"] .t1a-back{ background: rgba(255,255,255,.06); }
  .t1a-back:hover{ transform: translateY(-1px); box-shadow: 0 18px 48px rgba(15,23,42,.12); filter:saturate(1.02); }
  .t1a-back:active{ transform: translateY(0); }

  .t1a-wrap{
    border:1px solid var(--stroke);
    border-radius:18px;
    overflow:hidden;
    background: rgba(255,255,255,.20);
  }
  html[data-theme="dark"] .t1a-wrap{ background: rgba(255,255,255,.04); }

  .t1a-hdr{
    font-weight:950;
    text-align:center;
    padding:12px 12px;
    border-bottom:1px solid var(--stroke);
    color:var(--text);
    background: rgba(255,255,255,.35);
  }
  html[data-theme="dark"] .t1a-hdr{ background: rgba(255,255,255,.06); }

  .t1a-scroll{
    overflow:auto;
    -webkit-overflow-scrolling: touch;
    max-width:100%;
  }
  .t1a-scroll::-webkit-scrollbar{ height: 10px; }
  .t1a-scroll::-webkit-scrollbar-thumb{ background: rgba(15,23,42,.22); border-radius: 999px; }
  html[data-theme="dark"] .t1a-scroll::-webkit-scrollbar-thumb{ background: rgba(255,255,255,.18); }

  :root{
    --t1a-grid: rgba(15,23,42,.22);
    --t1a-sticky-shadow: rgba(15,23,42,.12);
  }
  html[data-theme="dark"]{
    --t1a-grid: rgba(255,255,255,.22);
    --t1a-sticky-shadow: rgba(0,0,0,.45);
  }

  table.t1a-table{
    border-collapse: separate;
    border-spacing: 0;
    min-width: 2180px;
    width: max-content;
    table-layout: fixed;
  }

  .t1a-table th, .t1a-table td{
    border-right:1px solid var(--t1a-grid);
    border-bottom:1px solid var(--t1a-grid);
    padding:6px 8px;
    font-size:12px;
    text-align:center;
    vertical-align:middle;
    color:var(--text);
    background:transparent;
  }

  .t1a-table thead tr:first-child th{ border-top:1px solid var(--t1a-grid); }
  .t1a-table tr > *:first-child{ border-left:1px solid var(--t1a-grid); }

  .t1a-table thead th{
    position:sticky;
    top:0;
    z-index:40;
    background: var(--surface);
    font-weight:950;
  }

  .t1a-vtxt{
    writing-mode: vertical-rl;
    transform: rotate(180deg);
    white-space: nowrap;
    font-weight: 900;
    line-height:1.05;
  }

  :root{
    --t1a-col-name: 190px;
    --t1a-col-shift: 74px;
  }
  .t1a-name{
    width:var(--t1a-col-name);
    min-width:var(--t1a-col-name);
    max-width:var(--t1a-col-name);
    font-weight:950;
    text-align:left;
    padding-left:10px;
  }
  .t1a-shift{
    width:var(--t1a-col-shift);
    min-width:var(--t1a-col-shift);
    max-width:var(--t1a-col-shift);
    font-weight:950;
  }

  .t1a-stickyA{
    position:sticky;
    left:0;
    z-index:200;
    background: var(--surface);
    box-shadow: 10px 0 16px -14px var(--t1a-sticky-shadow);
  }
  .t1a-stickyB{
    position:sticky;
    left:var(--t1a-col-name);
    z-index:190;
    background: var(--surface);
    box-shadow: 10px 0 16px -14px var(--t1a-sticky-shadow);
  }
  .t1a-table thead .t1a-stickyA,
  .t1a-table thead .t1a-stickyB,
  .t1a-table tbody .t1a-stickyA,
  .t1a-table tbody .t1a-stickyB{
    background: var(--surface);
  }

  .g-green{ background: rgba(34,197,94,.12); }
  .g-blue{ background: rgba(79,70,229,.12); }
  .g-yellow{ background: rgba(245,158,11,.14); }
  .g-gray{ background: rgba(100,116,139,.12); }
  html[data-theme="dark"] .g-green{ background: rgba(34,197,94,.08); }
  html[data-theme="dark"] .g-blue{ background: rgba(79,70,229,.08); }
  html[data-theme="dark"] .g-yellow{ background: rgba(245,158,11,.10); }
  html[data-theme="dark"] .g-gray{ background: rgba(100,116,139,.08); }

  .t1a-total td{
    background: rgba(255,244,204,.65);
    font-weight:950;
  }
  html[data-theme="dark"] .t1a-total td{
    background: rgba(255,244,204,.12);
  }

  .t1a-table tbody tr:hover td{ background: rgba(79,70,229,.06); }
  html[data-theme="dark"] .t1a-table tbody tr:hover td{ background: rgba(99,102,241,.10); }

  .t1a-note{
    margin-top:10px;
    color:var(--muted);
    font-size:13px;
    line-height:1.45;
  }

  @media (max-width: 980px){
    .t1a-titlebox h2{ font-size:18px; }
    :root{ --t1a-col-name: 160px; --t1a-col-shift: 64px; }
    .t1a-table th,.t1a-table td{ padding:6px 6px; font-size:11.5px; }
  }
  @media (max-width: 520px){
    .t1a-back{ width:100%; }
  }
</style>

<div class="t1a-panel">
  <div class="t1a-topbar">
    <div class="t1a-titlebox">
      <h2>
        <span data-i18n="t1_admin_title">Hisobot №1</span> — {{ date|date:"d.m.Y" }}
      </h2>
      <div class="t1a-subtitle" data-i18n="t1_admin_sub">
        Logistika markazlari bo‘yicha operativ ma’lumot (admin ko‘rish).
      </div>
    </div>

    <a class="t1a-back" href="{% url 'admin_table1_reports' %}">
      <span aria-hidden="true">←</span>
      <span data-i18n="back_to_list">Ro‘yxatga qaytish</span>
    </a>
  </div>

  <div class="t1a-wrap">
    <div class="t1a-hdr" data-i18n="t1_admin_header">
      Оперативная информация о работе логистических центров АО "Узтемирйулконтейнер" в сутки —
      {{ date|date:"d.m.Y" }} — к 18:00 час
    </div>

    <div class="t1a-scroll">
      <table class="t1a-table" id="t1admin">
        <colgroup>
          <col style="width:190px;"> {# Наименование ЛЦ #}
          <col style="width:74px;">  {# Смена #}
          <col style="width:74px;">  {# Подано на ЛЦ #}
          <col style="width:74px;">  {# к подаче со ст #}

          {% for _ in "1234567" %}<col style="width:74px;">{% endfor %}  {# Выгрузка #}
          {% for _ in "1234567" %}<col style="width:74px;">{% endfor %}  {# Под выгрузкой #}

          <col style="width:74px;"> {# Уборка #}

          {% for _ in "123456" %}<col style="width:74px;">{% endfor %}  {# Погрузка #}
          {% for _ in "123456" %}<col style="width:74px;">{% endfor %}  {# Под погрузкой #}

          <col style="width:86px;"> {# Суточные доходы #}
        </colgroup>

        <thead>
          <tr>
            <th rowspan="2" class="t1a-name t1a-stickyA" data-i18n="col_lc">Наименование ЛЦ</th>
            <th rowspan="2" class="t1a-shift t1a-stickyB" data-i18n="col_shift">Смена</th>

            <th rowspan="2"><div class="t1a-vtxt" data-i18n="t1_col_podano">Подано на ЛЦ</div></th>
            <th rowspan="2"><div class="t1a-vtxt" data-i18n="t1_col_kpod">к подаче со ст</div></th>

            <th colspan="7" class="g-green" data-i18n="t1_blk_vygr">Выгрузка</th>
            <th colspan="7" class="g-green" data-i18n="t1_blk_pod_vygr">Под выгрузкой</th>

            <th rowspan="2" class="g-yellow"><div class="t1a-vtxt" data-i18n="t1_col_uborka">Уборка</div></th>

            <th colspan="6" class="g-blue" data-i18n="t1_blk_pogr">Погрузка</th>
            <th colspan="6" class="g-blue" data-i18n="t1_blk_pod_pogr">Под погрузкой</th>

            <th rowspan="2" class="g-gray"><div class="t1a-vtxt" data-i18n="t1_col_income">суточные доходы</div></th>
          </tr>

          <tr>
            <th class="g-green"><div class="t1a-vtxt">фт</div></th>
            <th class="g-green"><div class="t1a-vtxt">конт.</div></th>
            <th class="g-green"><div class="t1a-vtxt">кр</div></th>
            <th class="g-green"><div class="t1a-vtxt">пв</div></th>
            <th class="g-green"><div class="t1a-vtxt" data-i18n="t1_misc">прочее</div></th>
            <th class="g-green"><div class="t1a-vtxt" data-i18n="t1_itogo">итого</div></th>
            <th class="g-green"><div class="t1a-vtxt" data-i18n="t1_itogo_kon">итого кон</div></th>

            <th class="g-green"><div class="t1a-vtxt">фт</div></th>
            <th class="g-green"><div class="t1a-vtxt">конт.</div></th>
            <th class="g-green"><div class="t1a-vtxt">кр</div></th>
            <th class="g-green"><div class="t1a-vtxt">пв</div></th>
            <th class="g-green"><div class="t1a-vtxt" data-i18n="t1_misc">прочее</div></th>
            <th class="g-green"><div class="t1a-vtxt" data-i18n="t1_itogo">итого</div></th>
            <th class="g-green"><div class="t1a-vtxt" data-i18n="t1_itogo_kon">итого кон</div></th>

            <th class="g-blue"><div class="t1a-vtxt">фт</div></th>
            <th class="g-blue"><div class="t1a-vtxt">конт.</div></th>
            <th class="g-blue"><div class="t1a-vtxt">кр</div></th>
            <th class="g-blue"><div class="t1a-vtxt">пв</div></th>
            <th class="g-blue"><div class="t1a-vtxt" data-i18n="t1_misc">прочее</div></th>
            <th class="g-blue"><div class="t1a-vtxt" data-i18n="t1_itogo_kon">итого кон</div></th>

            <th class="g-blue"><div class="t1a-vtxt">фт</div></th>
            <th class="g-blue"><div class="t1a-vtxt">конт.</div></th>
            <th class="g-blue"><div class="t1a-vtxt">кр</div></th>
            <th class="g-blue"><div class="t1a-vtxt">пв</div></th>
            <th class="g-blue"><div class="t1a-vtxt" data-i18n="t1_misc">прочее</div></th>
            <th class="g-blue"><div class="t1a-vtxt" data-i18n="t1_itogo_kon">итого кон</div></th>
          </tr>
        </thead>

        <tbody>
          {% for st in stations %}
            <tr>
              <td rowspan="{% if st.status %}3{% else %}2{% endif %}" class="t1a-name t1a-stickyA">{{ st.name }}</td>
              <td class="t1a-shift t1a-stickyB" data-i18n="shift_day">день</td>

              <td>{{ st.day_data|get_item:"podano_lc"|default_if_none:"0" }}</td>
              <td>{{ st.day_data|get_item:"k_podache_so_st"|default_if_none:"0" }}</td>

              <td class="g-green">{{ st.day_data|get_item:"vygr_ft"|default_if_none:"0" }}</td>
              <td class="g-green">{{ st.day_data|get_item:"vygr_cont"|default_if_none:"0" }}</td>
              <td class="g-green">{{ st.day_data|get_item:"vygr_kr"|default_if_none:"0" }}</td>
              <td class="g-green">{{ st.day_data|get_item:"vygr_pv"|default_if_none:"0" }}</td>
              <td class="g-green">{{ st.day_data|get_item:"vygr_proch"|default_if_none:"0" }}</td>
              <td class="g-green">{{ st.day_data|get_item:"vygr_itogo"|default_if_none:"0" }}</td>
              <td class="g-green">{{ st.day_data|get_item:"vygr_itogo_kon"|default_if_none:"0" }}</td>

              <td class="g-green">{{ st.day_data|get_item:"pod_vygr_ft"|default_if_none:"0" }}</td>
              <td class="g-green">{{ st.day_data|get_item:"pod_vygr_cont"|default_if_none:"0" }}</td>
              <td class="g-green">{{ st.day_data|get_item:"pod_vygr_kr"|default_if_none:"0" }}</td>
              <td class="g-green">{{ st.day_data|get_item:"pod_vygr_pv"|default_if_none:"0" }}</td>
              <td class="g-green">{{ st.day_data|get_item:"pod_vygr_proch"|default_if_none:"0" }}</td>
              <td class="g-green">{{ st.day_data|get_item:"pod_vygr_itogo"|default_if_none:"0" }}</td>
              <td class="g-green">{{ st.day_data|get_item:"pod_vygr_itogo_kon"|default_if_none:"0" }}</td>

              <td class="g-yellow">{{ st.day_data|get_item:"uborka"|default_if_none:"0" }}</td>

              <td class="g-blue">{{ st.day_data|get_item:"pogr_ft"|default_if_none:"0" }}</td>
              <td class="g-blue">{{ st.day_data|get_item:"pogr_cont"|default_if_none:"0" }}</td>
              <td class="g-blue">{{ st.day_data|get_item:"pogr_kr"|default_if_none:"0" }}</td>
              <td class="g-blue">{{ st.day_data|get_item:"pogr_pv"|default_if_none:"0" }}</td>
              <td class="g-blue">{{ st.day_data|get_item:"pogr_proch"|default_if_none:"0" }}</td>
              <td class="g-blue">{{ st.day_data|get_item:"pogr_itogo_kon"|default_if_none:"0" }}</td>

              <td class="g-blue">{{ st.day_data|get_item:"pod_pogr_ft"|default_if_none:"0" }}</td>
              <td class="g-blue">{{ st.day_data|get_item:"pod_pogr_cont"|default_if_none:"0" }}</td>
              <td class="g-blue">{{ st.day_data|get_item:"pod_pogr_kr"|default_if_none:"0" }}</td>
              <td class="g-blue">{{ st.day_data|get_item:"pod_pogr_pv"|default_if_none:"0" }}</td>
              <td class="g-blue">{{ st.day_data|get_item:"pod_pogr_proch"|default_if_none:"0" }}</td>
              <td class="g-blue">{{ st.day_data|get_item:"pod_pogr_itogo_kon"|default_if_none:"0" }}</td>

              <td class="g-gray">{{ st.day_data|get_item:"income_daily"|default_if_none:"0" }}</td>
            </tr>

            {% if st.status %}
            <tr>
              <td class="t1a-shift t1a-stickyB" data-i18n="shift_night">ночь</td>

              <td>{{ st.night_data|get_item:"podano_lc"|default_if_none:"0" }}</td>
              <td>{{ st.night_data|get_item:"k_podache_so_st"|default_if_none:"0" }}</td>

              <td class="g-green">{{ st.night_data|get_item:"vygr_ft"|default_if_none:"0" }}</td>
              <td class="g-green">{{ st.night_data|get_item:"vygr_cont"|default_if_none:"0" }}</td>
              <td class="g-green">{{ st.night_data|get_item:"vygr_kr"|default_if_none:"0" }}</td>
              <td class="g-green">{{ st.night_data|get_item:"vygr_pv"|default_if_none:"0" }}</td>
              <td class="g-green">{{ st.night_data|get_item:"vygr_proch"|default_if_none:"0" }}</td>
              <td class="g-green">{{ st.night_data|get_item:"vygr_itogo"|default_if_none:"0" }}</td>
              <td class="g-green">{{ st.night_data|get_item:"vygr_itogo_kon"|default_if_none:"0" }}</td>

              <td class="g-green">{{ st.night_data|get_item:"pod_vygr_ft"|default_if_none:"0" }}</td>
              <td class="g-green">{{ st.night_data|get_item:"pod_vygr_cont"|default_if_none:"0" }}</td>
              <td class="g-green">{{ st.night_data|get_item:"pod_vygr_kr"|default_if_none:"0" }}</td>
              <td class="g-green">{{ st.night_data|get_item:"pod_vygr_pv"|default_if_none:"0" }}</td>
              <td class="g-green">{{ st.night_data|get_item:"pod_vygr_proch"|default_if_none:"0" }}</td>
              <td class="g-green">{{ st.night_data|get_item:"pod_vygr_itogo"|default_if_none:"0" }}</td>
              <td class="g-green">{{ st.night_data|get_item:"pod_vygr_itogo_kon"|default_if_none:"0" }}</td>

              <td class="g-yellow">{{ st.night_data|get_item:"uborka"|default_if_none:"0" }}</td>

              <td class="g-blue">{{ st.night_data|get_item:"pogr_ft"|default_if_none:"0" }}</td>
              <td class="g-blue">{{ st.night_data|get_item:"pogr_cont"|default_if_none:"0" }}</td>
              <td class="g-blue">{{ st.night_data|get_item:"pogr_kr"|default_if_none:"0" }}</td>
              <td class="g-blue">{{ st.night_data|get_item:"pogr_pv"|default_if_none:"0" }}</td>
              <td class="g-blue">{{ st.night_data|get_item:"pogr_proch"|default_if_none:"0" }}</td>
              <td class="g-blue">{{ st.night_data|get_item:"pogr_itogo_kon"|default_if_none:"0" }}</td>

              <td class="g-blue">{{ st.night_data|get_item:"pod_pogr_ft"|default_if_none:"0" }}</td>
              <td class="g-blue">{{ st.night_data|get_item:"pod_pogr_cont"|default_if_none:"0" }}</td>
              <td class="g-blue">{{ st.night_data|get_item:"pod_pogr_kr"|default_if_none:"0" }}</td>
              <td class="g-blue">{{ st.night_data|get_item:"pod_pogr_pv"|default_if_none:"0" }}</td>
              <td class="g-blue">{{ st.night_data|get_item:"pod_pogr_proch"|default_if_none:"0" }}</td>
              <td class="g-blue">{{ st.night_data|get_item:"pod_pogr_itogo_kon"|default_if_none:"0" }}</td>

              <td class="g-gray">{{ st.night_data|get_item:"income_daily"|default_if_none:"0" }}</td>
            </tr>
            {% endif %}

            <tr class="t1a-total">
              <td class="t1a-shift t1a-stickyB" data-i18n="shift_total">итог</td>

              <td><b>{{ st.total_data|get_item:"podano_lc"|default_if_none:"0" }}</b></td>
              <td><b>{{ st.total_data|get_item:"k_podache_so_st"|default_if_none:"0" }}</b></td>

              <td class="g-green"><b>{{ st.total_data|get_item:"vygr_ft"|default_if_none:"0" }}</b></td>
              <td class="g-green"><b>{{ st.total_data|get_item:"vygr_cont"|default_if_none:"0" }}</b></td>
              <td class="g-green"><b>{{ st.total_data|get_item:"vygr_kr"|default_if_none:"0" }}</b></td>
              <td class="g-green"><b>{{ st.total_data|get_item:"vygr_pv"|default_if_none:"0" }}</b></td>
              <td class="g-green"><b>{{ st.total_data|get_item:"vygr_proch"|default_if_none:"0" }}</b></td>
              <td class="g-green"><b>{{ st.total_data|get_item:"vygr_itogo"|default_if_none:"0" }}</b></td>
              <td class="g-green"><b>{{ st.total_data|get_item:"vygr_itogo_kon"|default_if_none:"0" }}</b></td>

              <td class="g-green"><b>{{ st.total_data|get_item:"pod_vygr_ft"|default_if_none:"0" }}</b></td>
              <td class="g-green"><b>{{ st.total_data|get_item:"pod_vygr_cont"|default_if_none:"0" }}</b></td>
              <td class="g-green"><b>{{ st.total_data|get_item:"pod_vygr_kr"|default_if_none:"0" }}</b></td>
              <td class="g-green"><b>{{ st.total_data|get_item:"pod_vygr_pv"|default_if_none:"0" }}</b></td>
              <td class="g-green"><b>{{ st.total_data|get_item:"pod_vygr_proch"|default_if_none:"0" }}</b></td>
              <td class="g-green"><b>{{ st.total_data|get_item:"pod_vygr_itogo"|default_if_none:"0" }}</b></td>
              <td class="g-green"><b>{{ st.total_data|get_item:"pod_vygr_itogo_kon"|default_if_none:"0" }}</b></td>

              <td class="g-yellow"><b>{{ st.total_data|get_item:"uborka"|default_if_none:"0" }}</b></td>

              <td class="g-blue"><b>{{ st.total_data|get_item:"pogr_ft"|default_if_none:"0" }}</b></td>
              <td class="g-blue"><b>{{ st.total_data|get_item:"pogr_cont"|default_if_none:"0" }}</b></td>
              <td class="g-blue"><b>{{ st.total_data|get_item:"pogr_kr"|default_if_none:"0" }}</b></td>
              <td class="g-blue"><b>{{ st.total_data|get_item:"pogr_pv"|default_if_none:"0" }}</b></td>
              <td class="g-blue"><b>{{ st.total_data|get_item:"pogr_proch"|default_if_none:"0" }}</b></td>
              <td class="g-blue"><b>{{ st.total_data|get_item:"pogr_itogo_kon"|default_if_none:"0" }}</b></td>

              <td class="g-blue"><b>{{ st.total_data|get_item:"pod_pogr_ft"|default_if_none:"0" }}</b></td>
              <td class="g-blue"><b>{{ st.total_data|get_item:"pod_pogr_cont"|default_if_none:"0" }}</b></td>
              <td class="g-blue"><b>{{ st.total_data|get_item:"pod_pogr_kr"|default_if_none:"0" }}</b></td>
              <td class="g-blue"><b>{{ st.total_data|get_item:"pod_pogr_pv"|default_if_none:"0" }}</b></td>
              <td class="g-blue"><b>{{ st.total_data|get_item:"pod_pogr_proch"|default_if_none:"0" }}</b></td>
              <td class="g-blue"><b>{{ st.total_data|get_item:"pod_pogr_itogo_kon"|default_if_none:"0" }}</b></td>

              <td class="g-gray"><b>{{ st.total_data|get_item:"income_daily"|default_if_none:"0" }}</b></td>
            </tr>

          {% empty %}
            <tr>
              <td colspan="999" style="padding:16px;" data-i18n="no_data">Нет данных по этой дате</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <div class="t1a-note">
    <span data-i18n="t1_admin_note">
      Izoh: admin panelda “jami” maydonlari “ft+kr+pv+prochee” bo‘yicha hisoblanadi, “jami kon” esa “kont.” ni takrorlaydi
      (bloklar: Tushirish / Tushirishda / Yuklash / Yuklashda).
    </span>
  </div>
</div>

<script>
(function(){
  const dict = {
    uz: {
      t1_admin_title: "Hisobot №1",
      t1_admin_sub: "Logistika markazlari bo‘yicha operativ ma’lumot (admin ko‘rish).",
      back_to_list: "Ro‘yxatga qaytish",
      col_lc: "LM nomi",
      col_shift: "Smena",
      shift_day: "kun",
      shift_night: "tun",
      shift_total: "jami",
      no_data: "Ushbu sana bo‘yicha ma’lumot yo‘q",
      t1_admin_note: "Izoh: admin panelda “jami” maydonlari “ft+kr+pv+прочее” bo‘yicha hisoblanadi, “jami kon” esa “kont.” ni takrorlaydi (bloklar: Tushirish / Tushirishda / Yuklash / Yuklashda).",
      t1_admin_header: "\"O‘ztemiryo‘lkonteyner\" AJ logistika markazlari bo‘yicha sutkalik operativ ma’lumot —",
      t1_col_podano: "LMga berildi",
      t1_col_kpod: "St’dan berishga",
      t1_blk_vygr: "Tushirish",
      t1_blk_pod_vygr: "Tushirishda",
      t1_col_uborka: "Yig‘ishtirish",
      t1_blk_pogr: "Yuklash",
      t1_blk_pod_pogr: "Yuklashda",
      t1_col_income: "sutkalik daromad",
      t1_misc: "boshqa",
      t1_itogo: "jami",
      t1_itogo_kon: "jami kon"
    },
    ru: {
      t1_admin_title: "Таблица №1",
      t1_admin_sub: "Оперативная информация по логистическим центрам (админ просмотр).",
      back_to_list: "Назад к списку",
      col_lc: "Наименование ЛЦ",
      col_shift: "Смена",
      shift_day: "день",
      shift_night: "ночь",
      shift_total: "итог",
      no_data: "Нет данных по этой дате",
      t1_admin_note: "Примечание: в админке поля “итого” считаются как “фт+кр+пв+прочее”, а “итого кон” зеркалит “конт.” (для блоков: Выгрузка / Под выгрузкой / Погрузка / Под погрузкой).",
      t1_admin_header: "Оперативная информация о работе логистических центров АО \"Узтемирйулконтейнер\" в сутки —",
      t1_col_podano: "Подано на ЛЦ",
      t1_col_kpod: "к подаче со ст",
      t1_blk_vygr: "Выгрузка",
      t1_blk_pod_vygr: "Под выгрузкой",
      t1_col_uborka: "Уборка",
      t1_blk_pogr: "Погрузка",
      t1_blk_pod_pogr: "Под погрузкой",
      t1_col_income: "суточные доходы",
      t1_misc: "прочее",
      t1_itogo: "итого",
      t1_itogo_kon: "итого кон"
    }
  };

  function getLang(){
    const htmlLang = document.documentElement.getAttribute("data-lang");
    const ls = localStorage.getItem("lang") || localStorage.getItem("ui_lang");
    const lang = (htmlLang || ls || "ru").toLowerCase();
    return (lang === "uz") ? "uz" : "ru";
  }

  function applyLang(){
    const t = dict[getLang()] || dict.ru;
    document.querySelectorAll("[data-i18n]").forEach(el=>{
      const k = el.getAttribute("data-i18n");
      if (t[k] !== undefined) el.textContent = t[k];
    });
  }

  applyLang();
  window.addEventListener("storage", (e)=>{
    if(e.key === "lang" || e.key === "ui_lang") applyLang();
  });
  const mo = new MutationObserver(applyLang);
  mo.observe(document.documentElement, { attributes:true, attributeFilter:["data-lang"] });
})();
</script>
{% endblock %}
